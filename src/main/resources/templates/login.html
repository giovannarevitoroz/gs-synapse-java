<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title th:text="${tituloPagina}">GS Synapse</title>

    <!-- Estilos globais -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script defer th:src="@{/js/script.js}"></script>
</head>

<body>

<!-- ===================== SIDEBAR ===================== -->
<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <span class="logo">SYN⚙PSE</span>
        <button class="toggle-btn" id="toggle-btn">☰</button>
    </div>

    <nav class="sidebar-menu">
        <a th:href="@{/}" class="menu-item">Home</a>
        <a th:href="@{/competencias}" class="menu-item">Competências</a>

        <!-- SOMENTE ADMIN CONSEGUE VER ESSE LINK -->
        <a th:href="@{/usuarios}"
           class="menu-item"
           sec:authorize="hasRole('ADMIN')">
            Usuários
        </a>

        <a th:href="@{/recomendacoes}" class="menu-item">Recomendações</a>
        <a th:href="@{/recomendacoes/saude}" class="menu-item">Saúde</a>
        <a th:href="@{/recomendacoes/profissionais}" class="menu-item">Profissionais</a>
        <a th:href="@{/bemestar}" class="menu-item">Bem-estar</a>

        <!-- Logout via POST -->
        <form th:action="@{/logout}" method="post" class="logout-form">
            <button type="submit" class="menu-item logout-button">Sair</button>
        </form>
    </nav>
</aside>

<!-- ===================== CONTEÚDO ===================== -->
<main class="content">
    <div class="page-container">

        <h1 th:text="${tituloPagina}">Título da Página</h1>

        <!-- ================= ALERTAS ================= -->
        <div class="alerts">

            <!-- Erro de login (Spring Security ?error) -->
            <div th:if="${param.error}" class="alert alert-error">
                Usuário ou senha incorretos!
            </div>

            <!-- Logout com sucesso (Spring Security ?logout) -->
            <div th:if="${param.logout}" class="alert alert-success">
                Logout realizado com sucesso.
            </div>

            <!-- Mensagem de sucesso customizada (ex: registro de usuário) -->
            <div th:if="${mensagemSucesso}" class="alert alert-success">
                <p th:text="${mensagemSucesso}"></p>
            </div>

            <!-- Mensagem de erro customizada (ex: falha ao registrar usuário) -->
            <div th:if="${mensagemErro}" class="alert alert-error">
                <p th:text="${mensagemErro}"></p>
            </div>

        </div>

        <!-- Conteúdo dinâmico da página -->
        <div th:replace="${conteudo}"></div>

    </div>
</main>

</body>
</html>
