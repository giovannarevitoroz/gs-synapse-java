<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>CompetÃªncias - GS Synapse</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<div class="listing-container">
    <div class="listing-header">
        <h1>Gerenciar CompetÃªncias</h1>
        <div class="listing-actions">
            <a th:href="@{/competencias/novo}" class="btn-primary">Nova CompetÃªncia</a>
        </div>
    </div>

    <div class="forms-container">
        <!-- FormulÃ¡rio -->
        <div class="form-box">
            <div class="form-header">
                <div class="form-icon">ðŸš€</div>
                <h2 th:text="${competencia.idCompetencia != null} ? 'Editar CompetÃªncia' : 'Nova CompetÃªncia'"></h2>
            </div>

            <form th:action="@{/competencias/salvar}" th:object="${competencia}" method="post">
                <input type="hidden" th:field="*{idCompetencia}" />

                <div class="form-group">
                    <label class="form-label">Nome da CompetÃªncia</label>
                    <input type="text" th:field="*{nomeCompetencia}" class="form-input"
                           placeholder="Ex: Java, React, Python" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Categoria</label>
                    <select th:field="*{categoriaCompetencia}" class="form-input" required>
                        <option value="">Selecione a categoria</option>
                        <option value="Tecnologia">Tecnologia</option>
                        <option value="Design">Design</option>
                        <option value="NegÃ³cios">NegÃ³cios</option>
                        <option value="Soft Skills">Soft Skills</option>
                        <option value="LideranÃ§a">LideranÃ§a</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">DescriÃ§Ã£o</label>
                    <textarea th:field="*{descricaoCompetencia}" class="form-input" rows="4"
                              placeholder="Descreva a competÃªncia..." required></textarea>
                </div>

                <button type="submit" class="btn-submit"
                        th:text="${competencia.idCompetencia != null} ? 'Atualizar' : 'Salvar'">
                    Salvar CompetÃªncia
                </button>
            </form>
        </div>

        <!-- Lista -->
        <div class="form-box">
            <div class="form-header">
                <div class="form-icon">ðŸ“š</div>
                <h2>CompetÃªncias Existentes</h2>
            </div>

            <div class="table-container">
                <table>
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>Categoria</th>
                        <th>DescriÃ§Ã£o</th>
                        <th>AÃ§Ãµes</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="comp : ${competencias}">
                        <td th:text="${comp.idCompetencia}"></td>
                        <td th:text="${comp.nomeCompetencia}"></td>
                        <td>
                            <span th:class="${comp.categoriaCompetencia == 'Tecnologia' ? 'badge badge-tech' :
                                             comp.categoriaCompetencia == 'Design' ? 'badge badge-design' :
                                             comp.categoriaCompetencia == 'NegÃ³cios' ? 'badge badge-business' :
                                             'badge badge-default'}"
                                  th:text="${comp.categoriaCompetencia}">
                            </span>
                        </td>
                        <td th:text="${#strings.abbreviate(comp.descricaoCompetencia, 60)}"></td>
                        <td>
                            <a class="btn-secondary"
                               th:href="@{/competencias/editar/{id}(id=${comp.idCompetencia})}">Editar</a>
                            <a class="btn-danger"
                               th:href="@{/competencias/deletar/{id}(id=${comp.idCompetencia})}"
                               onclick="return confirm('Deseja realmente deletar esta competÃªncia?');">Deletar</a>
                        </td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(competencias)}">
                        <td colspan="5" style="text-align:center;">Nenhuma competÃªncia cadastrada.</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

</body>
</html>
