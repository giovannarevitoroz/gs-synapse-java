<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Recomenda√ß√µes de Sa√∫de - GS Synapse</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div th:replace="layout :: conteudo">
    <div class="listing-container">

        <!-- Cabe√ßalho -->
        <div class="listing-header">
            <h1>Gerenciar Recomenda√ß√µes de Sa√∫de</h1>
            <div class="listing-actions">
                <a th:href="@{/recomendacoes/saude/novo}" class="btn-primary">Nova Recomenda√ß√£o</a>
            </div>
        </div>

        <div class="forms-container">

            <!-- Formul√°rio -->
            <div class="form-box">
                <div class="form-header">
                    <div class="form-icon">üè•</div>
                    <h2 th:text="${recomendacaoSaudeDTO.idRecomendacao != null} ? 'Editar Recomenda√ß√£o de Sa√∫de' : 'Nova Recomenda√ß√£o de Sa√∫de'"></h2>
                </div>

                <form th:action="@{/recomendacoes/saude/salvar}" th:object="${recomendacaoSaudeDTO}" method="post">
                    <input type="hidden" th:field="*{idRecomendacao}" />

                    <div class="form-group">
                        <label class="form-label">Tipo de Sa√∫de</label>
                        <select th:field="*{tipoSaude}" class="form-input" required>
                            <option value="">Selecione o tipo</option>
                            <option value="Mental">Sa√∫de Mental</option>
                            <option value="F√≠sica">Sa√∫de F√≠sica</option>
                            <option value="Emocional">Sa√∫de Emocional</option>
                            <option value="Nutricional">Sa√∫de Nutricional</option>
                            <option value="Preventiva">Sa√∫de Preventiva</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">N√≠vel de Alerta</label>
                        <select th:field="*{nivelAlerta}" class="form-input" required>
                            <option value="">Selecione o n√≠vel</option>
                            <option value="Baixo">Baixo</option>
                            <option value="M√©dio">M√©dio</option>
                            <option value="Alto">Alto</option>
                            <option value="Cr√≠tico">Cr√≠tico</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Mensagem</label>
                        <textarea th:field="*{mensagemSaude}" class="form-input" rows="5"
                                  placeholder="Digite a mensagem de recomenda√ß√£o..." required></textarea>
                    </div>

                    <button type="submit" class="btn-submit"
                            th:text="${recomendacaoSaudeDTO.idRecomendacao != null} ? 'Atualizar' : 'Salvar'">Salvar</button>
                </form>
            </div>

            <!-- Lista -->
            <div class="form-box">
                <div class="form-header">
                    <div class="form-icon">üìä</div>
                    <h2>Recomenda√ß√µes de Sa√∫de Existentes</h2>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Tipo</th>
                            <th>N√≠vel Alerta</th>
                            <th>Mensagem</th>
                            <th>A√ß√µes</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="rec : ${recomendacoes}">
                            <td th:text="${rec.idRecomendacao}"></td>
                            <td>
                                    <span class="badge"
                                          th:classappend="${rec.tipoSaude} == 'Mental' ? 'badge-mental' :
                                                           ${rec.tipoSaude} == 'F√≠sica' ? 'badge-fisica' :
                                                           ${rec.tipoSaude} == 'Emocional' ? 'badge-emocional' :
                                                           'badge-default'"
                                          th:text="${rec.tipoSaude}"></span>
                            </td>
                            <td>
                                    <span class="badge"
                                          th:classappend="${rec.nivelAlerta} == 'Baixo' ? 'badge-baixo' :
                                                           ${rec.nivelAlerta} == 'M√©dio' ? 'badge-medio' :
                                                           ${rec.nivelAlerta} == 'Alto' ? 'badge-alto' :
                                                           'badge-critico'"
                                          th:text="${rec.nivelAlerta}"></span>
                            </td>
                            <td th:text="${#strings.abbreviate(rec.mensagemSaude, 50)}"></td>
                            <td>
                                <a class="btn-secondary" th:href="@{/recomendacoes/saude/editar/{id}(id=${rec.idRecomendacao})}">Editar</a>
                                <a class="btn-danger" th:href="@{/recomendacoes/saude/deletar/{id}(id=${rec.idRecomendacao})}" onclick="return confirm('Deseja realmente deletar?');">Deletar</a>
                            </td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(recomendacoes)}">
                            <td colspan="5" style="text-align:center;">Nenhuma recomenda√ß√£o cadastrada.</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>
</body>
</html>
